from pyrogram import Client, filters
from plugins.settings.main_settings import module_list, file_list
from time import time
from prefix import my_prefix
prefix = my_prefix()
from pyrogram.raw import functions, types
from pyrogram.types import Message, ChatPermissions
from pyrogram.utils import (
    get_channel_id,
    MAX_USER_ID,
    MIN_CHAT_ID,
    MAX_CHANNEL_ID,
    MIN_CHANNEL_ID,
)

@Client.on_message(filters.command("drugs", prefixes=prefix) & filters.me)
async def drugs(client: Client, message: Message):
    timnow = now.strftime("–î–∞—Ç–∞ %d.%m.%Y ‚Ä¢ –í—Ä–µ–º—è %H:%M:%S")
    log = logi + timnow + "\n‚ï∞ –ö–æ–º–º–∞–Ω–¥–∞ drugs"
    await Client.send_message("sawUSERBOT_LOGGERbot", log)

    perc = 0
    result = 0
    while(perc < 100):
        try:
            text = "üçÅ–ü–æ–∏—Å–∫ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ " + str(perc) + "%"
            await message.edit(str(text))
            perc += random.randint(1, 3)
            await asyncio.sleep(0.1)
        except FloodWait as e:
            await asyncio.sleep(e.x)
    text = "–ù–∞–π–¥–µ–Ω–æ 3 –∫–≥ —à–ø–µ–∫—Å–∞üç™üí®"
    await message.edit(str(text))
    await asyncio.sleep(3)
    text = "–û—Ñ–æ—Ä–º–ª—è–µ–º –≤–∫–∏–¥ üåø‚öóÔ∏è"
    await message.edit(str(text))
    await asyncio.sleep(5)
    result += random.randint(1, 4)

    if result == 1:
        text = "üî•üò≥ –í–∞—Å —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫–∞—á–∞–ª–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã üò≥üî•"
        await message.edit(str(text))
    if result == 2:
        text = "ü•¥–í—ã –ø–æ–∂–∏–ª–æ–π –Ω–∞—Ä–∫–æ–º–∞–Ω, –≤–∞—Å –Ω–µ –±–µ—Ä—ë—Ç –æ–¥–Ω–∞ –¥–æ–∑–∞, –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±–æ–ª—å—à–µ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ  –µ—â—ë —Ä–∞–∑ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤–∫–∏–¥ü•¥"
        await message.edit(str(text))
    if result == 3:
        text = "üòñ–°–µ–≥–æ–¥–Ω—è –Ω–µ –≤–∞—à –¥–µ–Ω—å, –≤—ã —Ö–æ—Ç—å –∏ –ø–æ–∂–∏–ª–æ–π, –Ω–æ –ø—Ä–∏–Ω—è–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ. –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏ - –ø–µ—Ä–µ–¥–æ–∑üòñ"
        await message.edit(str(text))
    if result == 4:
        text = "üòå–í—ã –æ—Ñ–æ—Ä–º–∏–ª–∏ –≤–∫–∏–¥, –í–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å)üòå"
        await message.edit(str(text))

module_list['Drugs'] = f'{prefix}drugs'
file_list['Drugs'] = 'drugs.py'